<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asynchronous Background</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <!--external CSS -->
    <link rel="stylesheet" href="style.css">
    </head>
<body id="colorBody">
    <br>
    <!-- <h1 class="text-center mx-3 bg-info rounded border border-dark">The background color will change every 1 second in a span of 20 seconds by default.</h1> -->
    
    <div class="container-fluid mt-5 border border-dark border-4 bg-info">
        <h1 class="border-dark border-top mt-2" id="colorName" style="text-align: center;">RGB color</h1>
        <br>
        <h1 class="mt-2 rounded  border-4 border-dark border-bottom" id="changeCounter" style="text-align: center;">0</h1>
    </div> 
    
    <div class="container-fluid mt-5 d-flex justify-content-evenly">
        <button class="btn btn-info rounded fs-3" onclick="start();">change background color</button>
        
        <button class="btn btn-info rounded fs-3" onclick="reset();">reset counter</button>
        
        <button class="btn btn-info rounded fs-3" onclick="stop();">pause</button>

        <input type="number" oninput="inputSpeed();" id="inputSpeed" placeholder="change speed">
        

        <br>
        
</div>


<br><br>
<h1 class="text-center" id="speedNote"></h1>
</body>

<script>
let count = 0;
function counter() {
    document.getElementById("changeCounter").innerHTML = ++count;
}

const randomBetween = (min, max) => min + Math.floor(Math.random() * (max - min + 1));

function changeColor() {
    let colorBody = document.getElementById("colorBody");
    const r = randomBetween(0, 255);
    const g = randomBetween(0, 255);
    const b = randomBetween(0, 255);
    const rgb = `rgb(${r},${g},${b})`;
    colorBody.style.backgroundColor = rgb;
    document.getElementById("colorName").innerHTML = rgb;
    counter();

    if (count >= 11) {
        clearInterval(intervalID);
        alert("10 random background colors has been updated since you last clicked the button.");
        reset();
    }
    
}


function start() {
    intervalID = setInterval(changeColor, 1000);

}
function stop() {
    clearInterval(intervalID);
}



function reset() {
    count = 0;
    document.getElementById("changeCounter").innerHTML = 0;
    // clearInterval(intervalID);
    colorBody.style.backgroundColor = "white";
    stop();
}
function inputSpeed() {
    var speedInput = document.getElementById("inputSpeed").value;
    
    document.getElementById("speedNote").innerHTML = "You changed speed to 1 new random color every " + speedInput + " second(s)";
    console.log(speedInput);

    function changeSpeed() {
    intervalID = setInterval(changeColor, speedInput * 1000);
    }
    changeSpeed();

    // counter();

    

    // if (count >= 21) {
    //     clearInterval(intervalID);
    //     alert("It's been 20 seconds since you last clicked the button.");
    //     reset();
    // }

}  

    // start();

// function changeSpeed {
    

// }

    </script>
</html>
